{"mappings":"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","sources":["frontend/src/index.ts","frontend/src/MfeOne.ts","frontend/src/lib/event-bus.ts","frontend/src/config.ts"],"sourcesContent":["export { MfeOne } from './MfeOne';\n","import { html, css, LitElement } from \"lit\";\nimport { property } from \"lit/decorators.js\";\nimport eventBus from \"./lib/event-bus\";\nimport config from \"./config\";\n\ninterface Settings {\n  bgColor?: string;\n}\n\nexport class MfeOne extends LitElement {\n  eventBus: any;\n\n  static styles = css`\n    :host {\n      display: block;\n      font-family: sans-serif;\n    }\n    .container {\n      padding: 25px;\n      border: 1px solid cyan;\n    }\n  `;\n\n  constructor() {\n    super();\n    // @ts-ignore\n    this.settingsMode = false;\n    fetch(config.settingsUrl)\n      .then((res) => res.json())\n      .then((settings) => (this.settings = settings))\n      .catch((err) => console.error(err));\n  }\n\n  @property({ type: Object }) settings: Settings = {};\n\n  @property({ type: String }) settingsFieldBgColor = \"\";\n\n  @property({ type: Boolean }) settingsMode = false;\n\n  @property({ type: String }) title = \"MFE-1\";\n\n  @property({ type: Number }) counter = 0;\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.eventBus = eventBus();\n\n    this.eventBus.addListener((event: any) => {\n      console.log(\"in MFE-1 event\", event);\n      switch (event.topic) {\n        case \"mfe1:increment\":\n          this.counter += 1;\n      }\n    });\n  }\n\n  __increment() {\n    this.eventBus.emit({ topic: \"mfe1:increment\" });\n  }\n\n  __showSettings() {\n    this.settingsMode = true;\n  }\n\n  __setBgColor(e: { target: { value: string } }) {\n    this.settingsFieldBgColor = e.target.value;\n  }\n\n  __saveSettings() {\n    const updatedSettings = {\n      ...this.settings,\n      bgColor: this.settingsFieldBgColor,\n    };\n\n    fetch(config.settingsUrl, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(updatedSettings),\n    })\n      .then((res) => res.json())\n      .then((settings) => (this.settings = settings));\n    this.settingsMode = false;\n  }\n\n  render() {\n    if (Object.keys(this.settings).length === 0)\n      return html` <div>Loading settings...</div> `;\n\n    return this.settingsMode\n      ? html`\n          <div\n            class=\"container\"\n            style=\"background-color: ${this.settings.bgColor}\"\n          >\n            <h2>${this.title}</h2>\n            <div>\n              <label>Background colour</label>\n              <input type=\"text\" @input=\"${this.__setBgColor}\" />\n            </div>\n            <p><button @click=${this.__saveSettings}>Done</button></p>\n          </div>\n        `\n      : html`\n          <div\n            class=\"container\"\n            style=\"background-color: ${this.settings.bgColor}\"\n          >\n            <h2>${this.title}</h2>\n            <p>count: ${this.counter}</p>\n            <p><button @click=${this.__increment}>Increment</button></p>\n            <p><button @click=${this.__showSettings}>Settings</button></p>\n          </div>\n        `;\n  }\n}\n","declare global {\n  interface Window {\n    globalEventBus?: any;\n  }\n}\n\ninterface EventType {\n  topic: string;\n  payload?: unknown;\n}\n\nconst eventBus = () => ({\n  addListener: (listener: Function) => {\n    window.globalEventBus\n      ? window.globalEventBus.addListener(listener)\n      : window.addEventListener(\"eventBus\", ((e: CustomEvent) =>\n          listener(e.detail)) as EventListener);\n  },\n  emit: (event: EventType) => {\n    window.globalEventBus\n      ? window.globalEventBus.emit(event)\n      : window.dispatchEvent(new CustomEvent(\"eventBus\", { detail: event }));\n  },\n});\n\nexport default eventBus;\n","const apiHost = \"http://localhost:8001\";\n\nexport default {\n  settingsUrl: `${apiHost}/settings`,\n};\n"],"names":[],"version":3,"file":"index.js.map"}